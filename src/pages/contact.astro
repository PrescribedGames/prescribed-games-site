---
import Base from "../layouts/Base.astro";
import Nav from "../components/Nav.astro";
---
<Base title="Contact — Prescribed Games" description="Get in touch with Prescribed Games.">
  <Fragment slot="nav"><Nav /></Fragment>

  <h1>Contact</h1>
  <p class="lede">Press, enquiries, and general contact information for Prescribed Games.</p>

  <section class="section">
    <h2>Studio Info</h2>
    <ul>
      <li>Founded: 2025</li>
      <li>Location: UK</li>
      <li>Focus: Experimental, atmospheric titles</li>
      <li>Current project: <em>Privacy</em> (in development)</li>
      <li>Website: <a href="https://prescribedgames.com">prescribedgames.com</a></li>
    </ul>
  </section>

  <section class="section">
    <h2>Assets</h2>
    <ul>
      <li><a href="/downloads/prescribed-logos.zip">Logo pack (PNG/SVG)</a> — placeholder</li>
      <li><a href="/downloads/privacy-keyart.zip">Privacy key art</a> — placeholder</li>
      <li><a href="/downloads/screenshots.zip">Screenshots</a> — placeholder</li>
    </ul>
  </section>

  <section class="section">
    <h2>Contact Form</h2>
    <p>Email: <a href="mailto:prescribedgames@proton.me">prescribedgames@proton.me</a></p>

    <!-- Removed `netlify` attribute; posting to Vercel API -->
    <form id="contact-form" method="post" action="/api/contact" accept-charset="UTF-8" autocomplete="on" novalidate>
      <!-- Honeypot to reduce spam -->
      <input type="text" name="website" style="display:none" tabindex="-1" autocomplete="off" />

      <div class="row">
        <div>
          <label for="name">Name</label>
          <input id="name" name="name" required />
        </div>
        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email" required />
        </div>
      </div>

      <label for="message">Message</label>
      <textarea id="message" name="message" rows="6" required></textarea>

      <p style="margin-top:12px">
        <button class="pill primary" type="submit">Send message</button>
      </p>

      <p id="form-note" style="color:var(--muted); font-size:12px">
        We’ll only use your details to reply to this enquiry.
      </p>
    </form>

    <script is:inline>
      // Progressive enhancement: show success/error text without leaving the page
      const form = document.getElementById('contact-form');
      const note = document.getElementById('form-note');

      form?.addEventListener('submit', async (e) => {
        e.preventDefault();
        const data = new FormData(form);
        try {
          const res = await fetch(form.action, { method: 'POST', body: data });
          const json = await res.json().catch(() => ({}));
          if (res.ok && json.ok) {
            note.textContent = 'Thanks — message received. We’ll get back to you.';
            form.reset();
          } else {
            note.textContent = json.hint || 'Could not send right now. Email us directly at prescribedgames@proton.me.';
          }
        } catch {
          note.textContent = 'Network error. Please email us directly at prescribedgames@proton.me.';
        }
      });
    </script>
  </section>
</Base>
